(()=>{var __webpack_modules__={921:(e,t,r)=>{var _=window.metaLayer||window._metaLayer,n="shop/stips/dist/client/",a=_?"".concat(_.env_assets,"/").concat(n):n;r.p=a},970:e=>{e.exports={creatorNamespace:"shop",componentId:"stips",componentVersion:"",contractVersion:"v1",assetBasePath:"dist/client"}},503:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>Stips});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(363),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(86),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),isMatched=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e)return!1;switch(e){case"simple":return r.some((e=>t.includes(e)));case"regex":return r.some((e=>RegExp(e).test(t)))}},tryElse=(e,t)=>{try{return e()}catch(e){return console.error(e),t}},Stips=_ref=>{var{allowedUrlRegexStrings=[],blockedUrlRegexStrings=[],content,javascriptCondition,machineStrategy,ticketId}=_ref,ref=react__WEBPACK_IMPORTED_MODULE_0__.useRef(),areScriptsExecuted=react__WEBPACK_IMPORTED_MODULE_0__.useRef(),[mounted,setMounted]=react__WEBPACK_IMPORTED_MODULE_0__.useState(!1),[conditionMet,setConditionMet]=react__WEBPACK_IMPORTED_MODULE_0__.useState();react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>{setMounted(!0);var href=window.location.href.toString(),isBlocked=isMatched(machineStrategy,href,blockedUrlRegexStrings),isAllowed=!allowedUrlRegexStrings.length||isMatched(machineStrategy,href,allowedUrlRegexStrings);setConditionMet(isAllowed&&!isBlocked&&(!javascriptCondition||tryElse((()=>Boolean(eval(javascriptCondition))),!1)))}),[]),react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>{ref.current&&!areScriptsExecuted.current&&(Array.from(ref.current.querySelectorAll("script")).forEach((e=>tryElse(new Function(e.textContent)))),areScriptsExecuted.current=!0)}),[conditionMet,mounted]);var hasSiteControlCondition=Boolean(javascriptCondition||allowedUrlRegexStrings.length||blockedUrlRegexStrings.length),el=react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{ref,key:ticketId,dangerouslySetInnerHTML:{__html:content}});return hasSiteControlCondition?hasSiteControlCondition&&mounted&&conditionMet?el:null:el};Stips.propTypes={allowedUrlRegexStrings:prop_types__WEBPACK_IMPORTED_MODULE_1___default().array,blockedUrlRegexStrings:prop_types__WEBPACK_IMPORTED_MODULE_1___default().array,content:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,javascriptCondition:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,placement:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,machineStrategy:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,shortName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,ticketId:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string}},86:e=>{"use strict";e.exports=PropTypes},363:e=>{"use strict";e.exports=React}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.p="";var __webpack_exports__={};(()=>{"use strict";__webpack_require__(921);var e=__webpack_require__(363),t=__webpack_require__.n(e);const r=ReactDOM,_=initializer;var n=__webpack_require__.n(_),a=__webpack_require__(86),o=__webpack_require__.n(a);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(e);t&&(_=_.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,_)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=e=>"object"!=typeof e?e:"0"in e?Object.values(e).map((e=>p(e))):Object.entries(e).reduce(((e,t)=>{var[r,_]=t;return c(c({},e),{},{[r]:p(_)})}),{});function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var _ in r)Object.prototype.hasOwnProperty.call(r,_)&&(e[_]=r[_])}return e},l.apply(this,arguments)}var d=t=>{var{placement:r}=t,[_,n]=e.useState([]);return e.useEffect((()=>{((e,t)=>{if(!e)throw new Error("in Data Fetcher constructor where falcorModel parameter is required.");return(e=>{var{falcorModel:t,nodeId:r,tenant:_="bbypres"}=e;if(!t)throw new Error("falcorModel required");if(!r)throw new Error("nodeId required");return t.getValue("shop.scds.v2.page.tenants['".concat(_,"'].pages['").concat(r,"']")).then((function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}))})({falcorModel:e,nodeId:"stips_container"}).then((e=>(null==e?void 0:e.rows)&&((e,t)=>{var r=[];return(e=p(e)).forEach((e=>{var{widgets:_}=e.columns[0];_.forEach((e=>{var _,n;e&&t===e.stipsLocation&&r.push({blockedUrlRegexStrings:(null===(_=e.urlBlockCommaSeparated)||void 0===_?void 0:_.split(/, */))||[],allowedUrlRegexStrings:(null===(n=e.urlAllowCommaSeparated)||void 0===n?void 0:n.split(/, */))||[],content:e.content,javascriptCondition:e.javascriptCondition,machineStrategy:e.machineStrategy,placement:e.stipsLocation,shortName:e.name,ticketId:e.associatedJiraTicket})}))})),r})(e.rows,t)))})(window.falcorModel,r).then(n)}),[]),e.createElement("div",{className:"stips-component"},_.map(((t,r)=>e.createElement(u.A,l({key:r},t)))))};d.propTypes={t:o().func,placement:o().string.isRequired};var u=__webpack_require__(503),E=__webpack_require__(970);const b=JSON.parse('{"name":"@gvpc/stips","version":"1.4.12","license":"UNLICENSED","main":"dist/server/server.js","contributors":[{"name":"Pathfinder Atlas","email":"Pathfinder-Atlas@bestbuy.com"}],"scripts":{"analyzeBundle":"../../scripts/analyze-bundle.sh","build":"../../scripts/build.sh","build:stats":"NODE_ENV=production webpack --mode \'production\' --define process.env.NODE_ENV=\'production\' --profile --json > compilation-stats.json","clean":"rm -rf dist coverage","henry":"npx henry","lint":"eslint .","lint:fix":"eslint . --fix","test":"jest --coverage","prepare":"yarn build","start":"node --inspect-port=${INSPECTOR_PORT:-9229} --inspect dev-server"},"dependencies":{"@gvp/lib-actions":"4.2.1","@gvp/lib-component-assets":"6.0.1","@gvp/lib-log-utils":"1.1.0"},"files":["dist"],"gitHead":"5cdbc087a41f6ab2bbba5482310adfa987a65e69"}');var{version:f}=b,O={componentId:E.componentId,contractVersion:E.contractVersion,creatorNamespace:E.creatorNamespace,componentVersion:f};n().registerComponent(O,((e,_,n)=>{var a=document.querySelector(_);(0,r.hydrate)(t().createElement(d,{placement:n.placement}),a)}))})()})();
//# sourceMappingURL=client-4d295473ad3946e14341fc881b9846a9.mjs.map