!function(n){"use strict";window.awbOffCanvas={capitalize:function(n){return n.charAt(0).toUpperCase()+n.slice(1)},set:function(n,a,e){n=n?"_"+n:"_data";let t=localStorage.getItem("off_canvas"+n);(t=t?JSON.parse(t):{})[a]=e,localStorage.setItem("off_canvas"+n,JSON.stringify(t))},get:function(n,a){n=n?"_"+n:"_data";let e=localStorage.getItem("off_canvas"+n);return(e=e?JSON.parse(e):{})[a]||""},animationsWithoutDirection:["flash","rubberBand","shake","flipinx","flipiny","lightspeedin","flipOutX","flipOutY","lightSpeedOut"],open_off_canvas:function(a,e=!0,t=!1){const o=n('.awb-off-canvas-wrap[data-id="'+a+'"]'),s=o.find(".awb-off-canvas"),i=window["off_canvas_"+a];if(!o.length)return;if(o.hasClass("awb-show")&&t)return void this.close_off_canvas(a);if(o.hasClass("awb-show")&&!t)return;let c=i.enter_animation;const f=i.enter_animation_direction&&"static"!==i.enter_animation_direction?this.capitalize(i.enter_animation_direction):"",r=i.enter_animation_speed||1;if(("off"===i.status_css_animations||"desktop"===i.status_css_animations&&i.is_mobile)&&(c=!1),c&&(this.animationsWithoutDirection.includes(c)||(c=c+"In"+f),s.addClass("fusion-animated "+c),s.attr("data-animation-type",c),s.css({visibility:"visible","animation-duration":r+"s"}),"sliding-bar"===i.type&&"push"===i.transition&&("left"===i.position||"right"===i.position))){const a={transition:"margin-left "+i.enter_animation_speed+"s"};a.marginLeft=s.outerWidth()+"px","right"===i.position&&(a.marginLeft="-"+s.outerWidth()+"px");let e="#wrapper";o.hasClass("init-for-studio")&&(e=".post-preview"),n(e).css(a)}if("no"===i.overlay_page_scrollbar&&n("html").css("overflow","hidden"),o.addClass("awb-show"),n('a[href^="#awb-oc__'+a+'"]').addClass("awb-oc-active"),e){const n=this.get(a,"open_count")||0;this.set(a,"open_count",n+1)}this.set(a,"last_open_date",new Date)},close_off_canvas:function(a,e=!0){const t=n('.awb-off-canvas-wrap[data-id="'+a+'"]'),o=t.find(".awb-off-canvas"),s=window["off_canvas_"+a];if(0===t.length||void 0===s)return;let i=s.exit_animation;const c=s.exit_animation_direction&&"static"!==s.exit_animation_direction?this.capitalize(s.exit_animation_direction):"",f=s.exit_animation_speed||1;if(("off"===s.status_css_animations||"desktop"===s.status_css_animations&&s.is_mobile)&&(i=!1),i){if(this.animationsWithoutDirection.includes(i)||(i=i+"Out"+c),o.addClass("fusion-animated "+i),o.attr("data-animation-type",i),o.addClass("is-closing"),o.css("animation-duration",f+"s"),"sliding-bar"===s.type&&"push"===s.transition&&("left"===s.position||"right"===s.position)){const a={transition:"margin-left "+s.exit_animation_speed+"s",marginLeft:0};let e="#wrapper";t.hasClass("init-for-studio")&&(e=".post-preview"),n(e).css(a)}}else"yes"===s.overlay&&t.hasClass("init-for-studio")&&o.addClass("is-closing"),"no"===s.overlay&&t.hasClass("init-for-studio")&&n("#icon-bar .go-back").click(),t.removeClass("awb-show");if(n('a[href^="#awb-oc__'+a+'"]').removeClass("awb-oc-active"),"no"===s.overlay_page_scrollbar&&n("html").css("overflow",""),this.removeHash(),e){const n=this.get(a,"close_count")||0;this.set(a,"close_count",n+1)}this.set(a,"closed",!0)},removeHash(){const n=window.location.href.split("#")[0];history.replaceState({},"",n)}},n(".awb-off-canvas").on("animationend",function(a){const e=n(this),t=e.parent();e.attr("data-animation-type")&&e.removeClass("fusion-animated").removeClass(e.attr("data-animation-type")).removeAttr("data-animation-type"),e.hasClass("is-closing")&&(e.removeClass("is-closing"),e.addClass("oc-waiting-for-close"),t.removeClass("awb-show"),t.hasClass("init-for-studio")&&n("#icon-bar .go-back").click())}),n(".awb-off-canvas-wrap").on("transitionend",function(a){const e=n(this).find(".awb-off-canvas");e.hasClass("is-closing")&&n(this).hasClass("init-for-studio")&&(n("#icon-bar .go-back").click(),e.removeClass("is-closing")),e.removeClass("oc-waiting-for-close")}),n(window).on("load",function(){if(location.hash&&location.hash.startsWith("#awb-oc__")||location.hash&&location.hash.startsWith("#awb-open-oc__")){const n=location.hash.split("__")[1];window.awbOffCanvas.open_off_canvas(n,!1,!1)}n(".awb-off-canvas-wrap.init-for-studio").each(function(a,e){const t=n(e).data("id");window.awbOffCanvas.open_off_canvas(t,!1,!1)})}),n('a[href^="#awb-oc__"]').on("click",function(a){a.preventDefault();const e=(n(this).attr("href")||"").split("__")[1];window.awbOffCanvas.open_off_canvas(e,!1,!0)}),n('a[href^="#awb-open-oc__"]').on("click",function(a){a.preventDefault();const e=(n(this).attr("href")||"").split("__")[1];window.awbOffCanvas.open_off_canvas(e,!1,!1)}),n('a[href^="#awb-close-oc__"]').on("click",function(a){a.preventDefault();const e=(n(this).attr("href")||"").split("__")[1];e?window.awbOffCanvas.close_off_canvas(e):n(".awb-off-canvas-wrap.awb-show").each(function(){const a=n(this).data("id");window.awbOffCanvas.close_off_canvas(a)}),window.awbOffCanvas.removeHash()}),n(".awb-off-canvas").on("click",function(n){n.stopPropagation()}),n(".awb-off-canvas-wrap:not(.overlay-disable-close)").on("click",function(a){a.preventDefault();const e=n(this).data("id");window.awbOffCanvas.close_off_canvas(e)}),n(".off-canvas-close").on("click",function(a){a.preventDefault();const e=n(this).closest(".awb-off-canvas-wrap").data("id");window.awbOffCanvas.close_off_canvas(e)}),n(document).on("keydown",function(a){if(27!==a.keyCode)return;n(".awb-off-canvas-wrap.awb-show:not(.disable-close-on-esc)").each(function(a,e){const t=n(e).data("id");window.awbOffCanvas.close_off_canvas(t)})}),n("body").on("goback",function(a){n(".post-preview").css({"margin-right":0,"margin-left":0})}),n(".awb-off-canvas-wrap").each(function(a,e){const t=n(e).data("id"),o=window["off_canvas_"+t],s=n("#wpadminbar"),i=s.outerHeight();if("full"===o.height&&s.length&&n(e).find(".awb-off-canvas").css("height",`calc(100vh - ${i}px)`),"sliding-bar"===o.type&&"top"===o.position&&s.length&&n(e).find(".awb-off-canvas").css("margin-top",`${i}px`),"yes"===o.on_click){const a=o.on_click_element?n(o.on_click_element):null;a&&a.length&&n(document).on("click",o.on_click_element,function(n){n.preventDefault(),window.awbOffCanvas.open_off_canvas(t,!1)})}let c=!1;if(o.frequency){if("close"===o.frequency){!0===window.awbOffCanvas.get(t,"closed")&&(c=!0)}if("once"===o.frequency){0<window.awbOffCanvas.get(t,"open_count")&&(c=!0)}if("xtimes"===o.frequency&&o.frequency_xtimes){const n=window.awbOffCanvas.get(t,"open_count");parseInt(o.frequency_xtimes)<=n&&(c=!0)}if("session"===o.frequency){sessionStorage.getItem("off_canvas_"+t+"_opened")?c=!0:sessionStorage.setItem("off_canvas_"+t+"_opened",!0)}let n=window.awbOffCanvas.get(t,"last_open_date");const a=new Date;if("day"===o.frequency&&n){a<(n=new Date(n)).getTime()+864e5&&(c=!0)}if("week"===o.frequency&&n){a<(n=new Date(n)).getTime()+6048e5&&(c=!0)}if("month"===o.frequency&&n){n=new Date(n),a<new Date(n).setMonth(n.getMonth()+1)&&(c=!0)}if("xdays"===o.frequency&&o.frequency_xdays&&n){n=new Date(n);const e=parseInt(o.frequency_xdays);a<n.getTime()+24*e*60*60*1e3&&(c=!0)}}if("yes"===o.after_x_page_views){const n=window.awbOffCanvas.get(t,"page_views")||0;n<parseInt(o.number_of_page_views)&&(c=!0),window.awbOffCanvas.set(t,"page_views",n+1)}if("yes"===o.after_x_sessions){let n;sessionStorage.getItem("off_canvas_"+t)||(sessionStorage.setItem("off_canvas_"+t,!0),n=window.awbOffCanvas.get(t,"sessions")||0,window.awbOffCanvas.set(t,"sessions",n+1)),(n=window.awbOffCanvas.get(t,"sessions"))<=parseInt(o.number_of_sessions)&&(c=!0)}if(o.when_arriving_from){const n=document.referrer,a=window.location.host,e=o.when_arriving_from;let t;!n||n.includes(a)?t="internal":(t="external",/\.?(google|bing|yahoo|duckduckbot|yandex|baidu|msn|teoma|slurp)\./.test(n)&&(t="search")),c=!e.includes(t)}if("sliding-bar"===o.type&&"opened"===o.off_canvas_state&&(c=!0),!0===o.isOpened&&(c=!0),!c){if("yes"===o.on_page_load&&setTimeout(()=>{window.awbOffCanvas.open_off_canvas(t),o.isOpened=!0},100),"yes"===o.time_on_page&&o.time_on_page_duration&&setTimeout(()=>{window.awbOffCanvas.open_off_canvas(t),o.isOpened=!0},1e3*o.time_on_page_duration),"yes"===o.on_scroll){const a=o.scroll_direction,e=o.scroll_to,s=document.documentElement.scrollHeight;let i=o.scroll_position;if(i&&isNaN(i)&&(i=i.includes("%")?s/100*parseInt(i):parseInt(i)),"down"===a&&"element"===e){const n=o.scroll_element?document.querySelector(o.scroll_element):null;if(n){const a=new IntersectionObserver(n=>{n.forEach(n=>{n.isIntersecting&&(window.awbOffCanvas.open_off_canvas(t),o.isOpened=!0,a.unobserve(n.target))})});a.observe(n)}}else n(window).on("scroll",function(n){"up"===o.scroll_direction&&this.oldScroll>this.scrollY&&(o.isOpened||window.awbOffCanvas.open_off_canvas(t),o.isOpened=!0),"down"===o.scroll_direction&&this.oldScroll<this.scrollY&&this.scrollY>=i&&(o.isOpened||window.awbOffCanvas.open_off_canvas(t),o.isOpened=!0),this.oldScroll=this.scrollY})}if("yes"===o.exit_intent){const n=function(a){null==a.relatedTarget&&"select"!==a.target.nodeName.toLowerCase()&&(window.awbOffCanvas.open_off_canvas(t),document.removeEventListener("mouseout",n),o.isOpened=!0)};document.addEventListener("mouseout",n)}if("yes"===o.after_inactivity&&o.inactivity_duration){const n=o.inactivity_duration;let a;const e=function(){a=window.setTimeout(s,1e3*n)},s=function(){o.isOpened||window.awbOffCanvas.open_off_canvas(t),o.isOpened=!0},i=function(){document.addEventListener("mousemove",c,!1),document.addEventListener("mousedown",c,!1),document.addEventListener("keypress",c,!1),document.addEventListener("touchmove",c,!1),document.addEventListener("scroll",c,!1),e()},c=function(){window.clearTimeout(a),e()};i()}}})}(jQuery);